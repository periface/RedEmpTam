var Engine=function(n){function r(n,t,i){for(var r=0;r<n.length;r++)if(n[r][t]===i)return n[r]}n||(n={useOverlay:!0,autoStart:!1,overlayObj:undefined});var i={IMG:"img"},t=this;return this.propertyServices=[],this.definePropertyService=function(n,i){t.propertyServices.push({propertyServiceName:n,propertyServiceEndPoint:i})},this.listener=function(){var n=[];$("[data-property]").each(function(){var u=$(this),f=$(this).data("property"),e=$(this).data("servicename"),i=r(t.propertyServices,"propertyServiceName",e);console.log(i);i==undefined?console.error("Servicio no definido"):t.buildAjaxObj(i.propertyServiceEndPoint,f,u,n)});$.when.apply($,n).done(t.allDoneFunction)},n.autoStart&&t.listener(),this.buildAjaxObj=function(n,i,r,u){if(n!==""&&i!==""){var f=n+"?key="+i;u.push($.ajax({url:f,data:i,success:function(n){t.bindData(r,n)}}))}},this.allDoneFunction=function(){n.useOverlay&&(n.overlayObj?document.getElementById(n.overlayObj).style.width="0%":console.warn("No hay una capa de carga definida"));console.log("All request done")},this.bindData=function(n,t){var r=n[0].nodeName.toLowerCase();switch(r){case i.IMG:n.attr("src",t);break;default:n.text(t)}},{propertyServices:this.propertyServices,defineNewPropertyService:this.definePropertyService,startListener:this.listener}};