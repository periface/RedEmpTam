var Engine=function(n){function i(n,t,i){for(var r=0;r<n.length;r++)if(n[r][t]===i)return n[r];return undefined}n||(console.warn("Options r null loading defaults..."),n={useOverlay:!0,autoStart:!1,overlayObj:undefined,enableDebug:!1});var t=this;return this.propertyServices=[],this.definePropertyService=function(n,i){t.propertyServices.push({propertyServiceName:n,propertyServiceEndPoint:i})},this.listener=function(){var r=[];$("[data-property]").each(function(){var o=$(this),s=$(this).data("property"),u=$(this).data("servicename"),h=$(this).data("printproperty"),c=$(this).data("replicate"),l=$(this).data("callback"),a=$(this).data("ignoreall"),f={propertyRequest:s,propertyServiceName:u,printInProperty:h,replicate:c,element:o,callbackFunc:l,useFuncOnly:a},e=i(t.propertyServices,"propertyServiceName",u);n.enableDebug&&console.debug(f);e==undefined?console.error("Servicio no definido"):t.buildAjaxObj(e.propertyServiceEndPoint,f,r)});$.when.apply($,r).done(t.allDoneFunction)},n.autoStart&&t.listener(),this.buildAjaxObj=function(i,r,u){if(i!==""&&r.propertyRequest!==""){var f=i+"?key="+r.propertyRequest;u.push($.ajax({url:f,data:r.propertyRequest,success:function(i,u,f){n.debug&&(console.log("Text status -->"),console.log(u),console.log("jqXHR -->"),console.log(f));r.callbackFunc?r.useFuncOnly?t.callFunction(r.callbackFunc,i,r.element):(t.bindData(r,i),t.callFunction(r.callbackFunc,i,r.element)):t.bindData(r,i)}}))}},this.callFunction=function(n,t,i){window[n](t,i)},this.allDoneFunction=function(){n.useOverlay&&(n.overlayObj?document.getElementById(n.overlayObj).style.width="0%":console.warn("No hay una capa de carga definida"));console.log("All request done")},this.bindData=function(n,t){n.printInProperty?(n.element.attr(n.printInProperty,t),n.replicate&&n.element.text(t)):n.element.text(t)},{propertyServices:this.propertyServices,defineNewPropertyService:this.definePropertyService,startListener:this.listener}};