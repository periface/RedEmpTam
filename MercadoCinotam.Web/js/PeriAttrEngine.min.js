var Engine=function(n){function i(n,t,i){for(var r=0;r<n.length;r++)if(n[r][t]===i)return n[r];return undefined}n||(console.warn("Options r null loading defaults..."),n={useOverlay:!0,autoStart:!1,overlayObj:undefined,enableDebug:!1,onAllRequestsFinished:undefined});var t=this;return this.propertyServices=[],this.definePropertyService=function(n,i){t.propertyServices.push({propertyServiceName:n,propertyServiceEndPoint:i})},this.listener=function(){var r=[];$("[data-property]").each(function(){var s=$(this),h=$(this).data("property"),o=$(this).data("servicename"),c=$(this).data("printproperty"),l=$(this).data("replicate"),a=$(this).data("callback"),v=$(this).data("ignoreall"),u=$(this).data("async"),f,e;u==undefined&&(u=!0);f={propertyRequest:h,propertyServiceName:o,printInProperty:c,replicate:l,element:s,callbackFunc:a,useFuncOnly:v,runAsync:u};e=i(t.propertyServices,"propertyServiceName",o);n.enableDebug&&console.debug(f);e==undefined?console.error("Service undefined"):t.buildAjaxObj(e.propertyServiceEndPoint,f,r)});$.when.apply($,r).done(t.allDoneFunction)},n.autoStart&&t.listener(),this.buildAjaxObj=function(i,r,u){if(i!==""&&r.propertyRequest!==""){var f=i+"?key="+r.propertyRequest;u.push($.ajax({url:f,data:r.propertyRequest,async:r.runAsync,success:function(i,u,f){n.debug&&(console.log("Text status -->"),console.log(u),console.log("jqXHR -->"),console.log(f));r.callbackFunc?r.useFuncOnly?t.callFunction(r.callbackFunc,i,r.element):(t.bindData(r,i),t.callFunction(r.callbackFunc,i,r.element)):t.bindData(r,i)}}))}},this.callFunction=function(n,t,i){try{window[n](t,i)}catch(r){console.warn("Callback function has failed to execute or has some internal errors, pleas check it out --->");console.log("----------------------------------");console.log(r);console.log("----------------------------------");console.info("Dont try to eval the function in the lib source dude... pls -->");console.info("Lets continue....");return}},this.allDoneFunction=function(){n.onAllRequestsFinished?(n.onAllRequestsFinished(),n.useOverlay&&t.hideOverlay()):(n.useOverlay&&t.hideOverlay(),console.log("All requests done"))},this.hideOverlay=function(){n.overlayObj?document.getElementById(n.overlayObj).style.width="0%":console.warn("No overlay defined")},this.bindData=function(n,i){n.printInProperty?(n.element.attr(n.printInProperty,i),n.replicate?t.appendDataInDomElement(n,i):t.appendOnlyId(n)):t.appendDataInDomElement(n,i)},this.appendDataInDomElement=function(n,t){n.element.text(t);n.element.attr("id",n.propertyRequest)},this.appendOnlyId=function(n){n.element.attr("id",n.propertyRequest)},this.getValueFromDomElement=function(n){var t=document.getElementById(n).value;return t?t:undefined},{propertyServices:this.propertyServices,defineNewPropertyService:this.definePropertyService,getValue:this.getValueFromDomElement,startListener:this.listener}};