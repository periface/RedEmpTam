var Engine=function(n){function i(n,t,i){for(var r=0;r<n.length;r++)if(n[r][t]===i)return n[r]}n||(n={useOverlay:!0,autoStart:!1,overlayObj:undefined});var t=this;return this.propertyServices=[],this.definePropertyService=function(n,i){t.propertyServices.push({propertyServiceName:n,propertyServiceEndPoint:i})},this.listener=function(){var n=[];$("[data-property]").each(function(){var e=$(this),o=$(this).data("property"),r=$(this).data("servicename"),s=$(this).data("printproperty"),h=$(this).data("replicate"),u={propertyRequest:o,propertyServiceName:r,printInProperty:s,replicate:h,element:e},f=i(t.propertyServices,"propertyServiceName",r);console.log(u);f==undefined?console.error("Servicio no definido"):t.buildAjaxObj(f.propertyServiceEndPoint,u,n)});$.when.apply($,n).done(t.allDoneFunction)},n.autoStart&&t.listener(),this.buildAjaxObj=function(n,i,r){if(n!==""&&i.propertyRequest!==""){var u=n+"?key="+i.propertyRequest;r.push($.ajax({url:u,data:i.propertyRequest,success:function(n){t.bindData(i,n)}}))}},this.allDoneFunction=function(){n.useOverlay&&(n.overlayObj?document.getElementById(n.overlayObj).style.width="0%":console.warn("No hay una capa de carga definida"));console.log("All request done")},this.bindData=function(n,t){n.printInProperty?(n.element.attr(n.printInProperty,t),n.replicate&&n.element.text(t)):n.element.text(t)},{propertyServices:this.propertyServices,defineNewPropertyService:this.definePropertyService,startListener:this.listener}};